/*! photoqiu version 1.0  create js date : 2014-09-25 16:44:03 */
function Calendar(a,b,c,d,e,f){this.beginYear=a||2e3,this.endYear=b||2140,this.language=c||0,this.dateVal="",this.orderType=0,this.limit=!1,this.patternDelimiter=d||"-",this.date2StringPattern=e||Calendar.language.date2StringPattern[this.language].replace(/\-/g,this.patternDelimiter),this.string2DatePattern=f||Calendar.language.string2DatePattern[this.language],this.dateControl=null,this.panel=this.getElementById("__calendarPanel"),this.iframe=window.frames.__calendarIframe,this.form=null,this.date=new Date,this.year=this.date.getFullYear(),this.month=this.date.getMonth(),this.colors={font_cur_day:"#fff",font_over:"#000",font_out:"#000",font_disenabled:"#fff",bg_disenabled:"#e6e6e6",bg_cur_day:"#90c231",bg_over:"#fff",bg_out:"#e6e6e6"}}Calendar.language={year:["年","Year","YEAR","年"],months:[["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]],weeks:[["日","一","二","三","四","五","六"],["Sun","Mon","Tur","Wed","Thu","Fri","Sat"],["Sun","Mon","Tur","Wed","Thu","Fri","Sat"],["日","一","二","三","四","五","六"]],clear:["清空","Clear","Clear","清空"],today:["今天","Today","Today","今天"],close:["关闭","Close","Close","关闭"],date2StringPattern:["yyyy-MM-dd","yyyy-MM-dd","yyyy-MM-dd","yyyy-MM-dd"],string2DatePattern:["ymd","ymd","ymd","ymd"]},Calendar.prototype.draw=function(){calendar=this;var a=[];a[a.length]='<form id="__calendarForm" name="__calendarForm" method="post">',a[a.length]='<div class="dateTitle"><a href="javascript:void(0);" class="l" name="goPrevMonthButton" id="goPrevMonthButton"><img src="http://vb.lenovo.com/img/left_arrow.gif" width="18" height="19" /></a><span class="th" id="yearSelect">九月  2014年</span><a href="javascript:void(0);" class="r" name="goNextMonthButton" id="goNextMonthButton"><img src="http://vb.lenovo.com/img/right_arrow.gif" width="18" height="19" /></a></div>',a[a.length]='<table id="__calendarTable" width="232" border="0" cellpadding="0" cellspacing="0" align="center">',a[a.length]='<tr class="title">';for(var b=0;7>b;b++)a[a.length]='<th class="theader">',a[a.length]=Calendar.language.weeks[this.language][b],a[a.length]="</th>";for(a[a.length]="</tr>",b=0;6>b;b++){a[a.length]='<tr align="center">';for(var c=0;7>c;c++)switch(c){case 0:a[a.length]='<td class="sun">&nbsp;</td>';break;case 6:a[a.length]='<td class="sat">&nbsp;</td>';break;default:a[a.length]='<td class="normal">&nbsp;</td>'}a[a.length]="</tr>"}a[a.length]=' <tr style="display:none;">',a[a.length]='  <th colspan="2"><input type="button" class="b" name="clearButton" id="clearButton" /></th>',a[a.length]='  <th colspan="3"><input type="button" class="b" name="selectTodayButton" id="selectTodayButton" /></th>',a[a.length]='  <th colspan="2"><input type="button" class="b" name="closeButton" id="closeButton" /></th>',a[a.length]=" </tr>",a[a.length]="</table>",a[a.length]="</form>",this.iframe.document.body.innerHTML=a.join(""),this.form=this.iframe.document.forms.__calendarForm,this.form.clearButton.value=Calendar.language.clear[this.language],this.form.selectTodayButton.value=Calendar.language.today[this.language],this.form.closeButton.value=Calendar.language.close[this.language],this.form.getElementsByTagName("a")[0].onclick=function(){calendar.goPrevMonth(this)},this.form.getElementsByTagName("a")[1].onclick=function(){calendar.goNextMonth(this)},this.form.clearButton.onclick=function(){calendar.dateControl.value="",calendar.hide()},this.form.closeButton.onclick=function(){calendar.hide()},this.form.selectTodayButton.onclick=function(){var a=new Date;calendar.date=a,calendar.year=a.getFullYear(),calendar.month=a.getMonth(),calendar.dateControl.value=a.format(calendar.date2StringPattern),calendar.hide()}},Calendar.prototype.bindYear=function(){var a=this.form.getElementsByTagName("span")[0];a.length=0,a.innerHTML=Calendar.language.months[this.language][calendar.month]+"  "+calendar.year+Calendar.language.year[this.language]},Calendar.prototype.bindMonth=function(){},Calendar.prototype.goPrevMonth=function(){(this.year!==this.beginYear||0!==this.month)&&(this.month--,-1===this.month&&(this.year--,this.month=11),this.date=new Date(this.year,this.month,1),this.changeSelect(),this.limit?this.seTimebindData(this.dateVal,this.orderType):this.bindData())},Calendar.prototype.goNextMonth=function(){(this.year!==this.endYear||11!==this.month)&&(this.month++,12===this.month&&(this.year++,this.month=0),this.date=new Date(this.year,this.month,1),this.changeSelect(),this.limit?this.seTimebindData(this.dateVal,this.orderType):this.bindData())},Calendar.prototype.changeSelect=function(){var a=this.form.getElementsByTagName("span")[0];a.innerHTML=Calendar.language.months[this.language][parseInt(this.date.getMonth(),10)]+"  "+calendar.year+Calendar.language.year[this.language]},Calendar.prototype.update=function(a){this.year=a.form.yearSelect.options[a.form.yearSelect.selectedIndex].value,this.month=a.form.monthSelect.options[a.form.monthSelect.selectedIndex].value,this.date=new Date(this.year,this.month,1),this.limit?this.seTimebindData(this.dateVal,this.orderType):this.bindData()},Calendar.prototype.bindData=function(){for(var a=this,b=this.getMonthViewDateArray(this.date.getFullYear(),this.date.getMonth()),c=this.getElementsByTagName("td",this.getElementById("__calendarTable",this.iframe.document)),d=0;d<c.length;d++)if(c[d].style.backgroundColor=a.colors.bg_over,c[d].style.color=a.colors.font_out,c[d].onclick=null,c[d].onmouseover=null,c[d].onmouseout=null,c[d].innerHTML=b[d]||"&nbsp;",!(d>b.length-1)&&b[d]){var e=new Date;e.getFullYear()===a.date.getFullYear()&&e.getMonth()===a.date.getMonth()&&e.getDate()===b[d]?(c[d].style.backgroundColor=a.colors.bg_cur_day,c[d].style.color=a.colors.font_cur_day,c[d].onmouseover=function(){this.style.backgroundColor=a.colors.bg_out,this.style.color=a.colors.font_out},c[d].onmouseout=function(){this.style.backgroundColor=a.colors.bg_cur_day,this.style.color=a.colors.font_cur_day},c[d].onclick=function(){var b=a.dateControl.value;a.dateControl&&(a.dateControl.value=new Date(a.date.getFullYear(),a.date.getMonth(),this.innerHTML).format(a.date2StringPattern)),a.hide(),b!==a.dateControl.value&&a.dateControl.onchange&&a.dateControl.onchange()}):e.getFullYear()<a.date.getFullYear()?(c[d].style.backgroundColor=a.colors.bg_disenabled,c[d].style.color=a.colors.font_disenabled):e.getFullYear()<=a.date.getFullYear()&&e.getMonth()<a.date.getMonth()?(c[d].style.backgroundColor=a.colors.bg_disenabled,c[d].style.color=a.colors.font_disenabled):e.getFullYear()<=a.date.getFullYear()&&e.getMonth()===a.date.getMonth()&&e.getDate()<b[d]?(c[d].style.backgroundColor=a.colors.bg_disenabled,c[d].style.color=a.colors.font_disenabled):(c[d].onmouseover=function(){this.style.backgroundColor=a.colors.bg_out,this.style.color=a.colors.font_out},c[d].onmouseout=function(){this.style.backgroundColor=a.colors.bg_over,this.style.color=a.colors.font_over},c[d].onclick=function(){var b=a.dateControl.value;a.dateControl&&(a.dateControl.value=new Date(a.date.getFullYear(),a.date.getMonth(),this.innerHTML).format(a.date2StringPattern)),a.hide(),b!==a.dateControl.value&&a.dateControl.onchange&&a.dateControl.onchange()})}},Calendar.prototype.seTimebindData=function(a,b){if(!a)return this.bindData(),!1;for(var c=this,d=parseInt(a.split("-")[1],10),e=0,f=parseInt(a.split("-")[0],10),g=parseInt(this.date.getMonth(),10)+1,h=parseInt(this.date.getFullYear(),10),i=this.getMonthViewDateArray(this.date.getFullYear(),this.date.getMonth()),j=new Date,k=this.getElementsByTagName("td",this.getElementById("__calendarTable",this.iframe.document)),l=0,m=k.length;m>l;l++)if(k[l].style.backgroundColor=c.colors.bg_over,k[l].style.color=c.colors.font_out,k[l].onclick=null,k[l].onmouseover=null,k[l].onmouseout=null,k[l].innerHTML=i[l]||"&nbsp;",!(l>i.length-1)&&i[l]){if("from"===b){if(h>f){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}if(h===f){if(g>d){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}if(d>g){k[l].onclick=function(){var a=c.dateControl.value;c.dateControl&&(c.dateControl.value=new Date(c.date.getFullYear(),c.date.getMonth(),this.innerHTML).format(c.date2StringPattern)),c.hide(),a!==c.dateControl.value&&c.dateControl.onchange&&c.dateControl.onchange()};continue}if(g===d&&(e=parseInt(a.split("-")[2],10)||j.getDate()),i[l]>e&&"from"===b){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}k[l].onclick=function(){var a=c.dateControl.value;c.dateControl&&(c.dateControl.value=new Date(c.date.getFullYear(),c.date.getMonth(),this.innerHTML).format(c.date2StringPattern)),c.hide(),a!==c.dateControl.value&&c.dateControl.onchange&&c.dateControl.onchange()}}else k[l].onclick=function(){var a=c.dateControl.value;c.dateControl&&(c.dateControl.value=new Date(c.date.getFullYear(),c.date.getMonth(),this.innerHTML).format(c.date2StringPattern)),c.hide(),a!==c.dateControl.value&&c.dateControl.onchange&&c.dateControl.onchange()}}if("to"===b){if(parseInt(h,10)<parseInt(f,10)){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}if(parseInt(h,10)<=parseInt(f,10)&&parseInt(g,10)<parseInt(d,10)){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}parseInt(g,10)===parseInt(d,10)&&(e=parseInt(a.split("-")[2],10)||j.getDate())}if(i[l]<e&&"to"===b){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}if(j.getFullYear()<c.date.getFullYear()){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}if(j.getFullYear()<=c.date.getFullYear()&&parseInt(j.getMonth(),10)<parseInt(c.date.getMonth(),10)){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}if(j.getFullYear()<=c.date.getFullYear()&&parseInt(j.getMonth(),10)===parseInt(c.date.getMonth(),10)&&j.getDate()<i[l]){k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled;continue}k[l].onclick=function(){var a=c.dateControl.value;c.dateControl&&(c.dateControl.value=new Date(c.date.getFullYear(),c.date.getMonth(),this.innerHTML).format(c.date2StringPattern)),c.hide(),a!==c.dateControl.value&&c.dateControl.onchange&&c.dateControl.onchange()},j.getFullYear()===c.date.getFullYear()&&j.getMonth()===c.date.getMonth()&&j.getDate()===i[l]?(k[l].style.backgroundColor=c.colors.bg_cur_day,k[l].style.color=c.colors.font_cur_day,k[l].onmouseover=function(){this.style.backgroundColor=c.colors.bg_out,this.style.color=c.colors.font_out},k[l].onmouseout=function(){this.style.backgroundColor=c.colors.bg_cur_day,this.style.color=c.colors.font_cur_day},k[l].onclick=function(){var a=c.dateControl.value;c.dateControl&&(c.dateControl.value=new Date(c.date.getFullYear(),c.date.getMonth(),this.innerHTML).format(c.date2StringPattern)),c.hide(),a!==c.dateControl.value&&c.dateControl.onchange&&c.dateControl.onchange()}):j.getFullYear()<c.date.getFullYear()?(k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled):j.getFullYear()<=c.date.getFullYear()&&j.getMonth()<c.date.getMonth()?(k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled):j.getFullYear()<=c.date.getFullYear()&&j.getMonth()===c.date.getMonth()&&j.getDate()<i[l]?(k[l].style.backgroundColor=c.colors.bg_disenabled,k[l].style.color=c.colors.font_disenabled):(k[l].onmouseover=function(){this.style.backgroundColor=c.colors.bg_out,this.style.color=c.colors.font_out},k[l].onmouseout=function(){this.style.backgroundColor=c.colors.bg_over,this.style.color=c.colors.font_over})}},Calendar.prototype.getMonthViewDateArray=function(a,b){for(var c=new Array(42),d=new Date(a,b,1).getDay(),e=new Date(a,b+1,0).getDate(),f=0;e>f;f++)c[f+d]=f+1;return this.doShowMonthView(a,b),c},Calendar.prototype.doShowMonthView=function(a,b){var c=this.form.getElementsByTagName("span")[0];c.innerHTML=Calendar.language.months[this.language][parseInt(b,10)]+"  "+a+Calendar.language.year[this.language]},Calendar.prototype.show=function(a,b){if("visible"===this.panel.style.visibility&&(this.panel.style.visibility="hidden",this.panel.style.display="none"),!a)throw new Error("arguments[0] is necessary!");this.dateControl=a,b=b||a,this.draw(),this.bindYear(),a.value.length>0&&(this.date=new Date(a.value.toDate(this.patternDelimiter,this.string2DatePattern)),this.year=this.date.getFullYear(),this.month=this.date.getMonth()),this.bindData();var c=this.getAbsPoint(b);this.panel.style.left=c.x+"px",this.panel.style.top=c.y+a.offsetHeight+"px",this.panel.style.visibility="visible",this.panel.style.display=""},Calendar.prototype.seTimeShow=function(a,b,c,d){if(this.limit=!0,this.dateVal=this.getElementById(b).value||"",this.orderType=c,"visible"===this.panel.style.visibility&&(this.panel.style.visibility="hidden",this.panel.style.display="none"),!a)throw new Error("arguments[0] is necessary!");this.dateControl=a,d=d||a,this.draw(),this.bindYear(),a.value.length>0&&(this.date=new Date(a.value.toDate(this.patternDelimiter,this.string2DatePattern)),this.year=this.date.getFullYear(),this.month=this.date.getMonth()),this.dateVal?this.seTimebindData(this.dateVal,c):this.seTimebindData("",0);var e=this.getAbsPoint(d);this.panel.style.left=e.x+"px",this.panel.style.top=e.y+a.offsetHeight+"px",this.panel.style.visibility="visible",this.panel.style.display=""},Calendar.prototype.hide=function(){this.panel.style.visibility="hidden",this.panel.style.display="none"},Calendar.prototype.getElementById=function(a,b){return b=b||document,document.getElementById?b.getElementById(a):document.all(a)},Calendar.prototype.getElementsByTagName=function(a,b){return b=b||document,document.getElementsByTagName?b.getElementsByTagName(a):document.all.tags(a)},Calendar.prototype.getAbsPoint=function(a){for(var b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return{x:b,y:c}},Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"w+":"日一二三四五六".charAt(this.getDay()),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},String.prototype.toDate=function(a,b){a=a||"-",b=b||"ymd";var c=this.split(a),d=parseInt(c[b.indexOf("y")],10);d.toString().length<=2&&(d+=2e3),isNaN(d)&&(d=(new Date).getFullYear());var e=parseInt(c[b.indexOf("m")],10)-1,f=parseInt(c[b.indexOf("d")],10);return isNaN(f)&&(f=1),new Date(d,e,f)},document.writeln('<div id="__calendarPanel" style="position:absolute;visibility:hidden;display:none;z-index:9999;background-color:transparent;border:none;width:240px;height:276px;">'),document.writeln('<iframe name="__calendarIframe" id="__calendarIframe" width="100%" height="100%" scrolling="no" frameborder="0" style="margin:0px;"></iframe>');var __ci=window.frames.__calendarIframe;__ci.document.writeln("<!DOCTYPE HTML>"),__ci.document.writeln('<html lang="zh-CN" class="ua-mac ua-webkit">'),__ci.document.writeln("<head>"),__ci.document.writeln('<meta charset="UTF-8">'),__ci.document.writeln('<meta http-equiv="Content-Type" content="text/html; charset=utf-8">'),__ci.document.writeln('<meta name="renderer" content="webkit">'),__ci.document.writeln("<title>Web Calendar</title>"),__ci.document.writeln('<style type="text/css">'),__ci.document.writeln("<!--"),__ci.document.writeln("html, body{width: 100%;height:100%;}"),__ci.document.writeln('body {font:"microsoft yahei", SimSun, Arial, Helvetica, sans-serif, Tahoma 12px/1.2em;margin:0;text-align:center;}'),__ci.document.writeln("table{padding:0;margin:0 auto;}img{border:0;border:none;}a{border:0;border:none;padding:0;margin:0;}form{margin:0px}input.b{border:1px solid #CCCCCC;background-color:#EFEFEF;width:100%;height:20px}table{background-color:#e6e6e6}table tr {background-color:#fff;}table td{width:30px;height:26px;boder:1px solid #fff;cursor: pointer;}.dateTitle a.l{width:24px;height:24px;position:absolute;top:4px;left:50%;margin:0 0 0 -110px;+top:10px;}.dateTitle a.r{width:24px;height:24px;position:absolute;top:4px;right:50%;margin:0 -110px 0 0;+top:10px;}.dateTitle .th{display:inline-block;font-size:20px;color:#fff;line-height:45px;height:45px;text-shadow:1px 1px 3px #7ba22a}.dateTitle{height:45px;line-height:45px;background: #fff url(myaccount/img/dateTitle.png) no-repeat 50% 3px;position:relative}td{width:30px;height:26px;border:1px solid #e6e6e6}.title th{padding:16px 0 10px 0;height:26px;line-height:26px;}"),__ci.document.writeln("-->"),__ci.document.writeln("</style>"),__ci.document.writeln("</head>"),__ci.document.writeln("<body>"),__ci.document.writeln("</body>"),__ci.document.writeln("</html>"),__ci.document.close(),document.writeln("</div>");var calendar=new Calendar;document.onclick=function(){calendar.dateControl!=window.event.srcElement&&calendar.hide()};